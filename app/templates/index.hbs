<main style="padding:24px">

  <h1>Socialte API Demo</h1>

  <h2>Posts {{this.model.posts.length}}</h2>

  <p>Querying posts and returning associated tags</p>

  <ul>
    {{#each this.model.posts as |post|}}
      <li>
        {{post.title}}:
        {{#each post.tags as |tag|}}
          [{{tag.name}}]
        {{/each}}
        {{#if post.favourites.length}}
          <button
            type="button"
            {{on "click" (fn this.unfavourite post.favourites.firstObject)}}
          >-</button>
        {{else}}
          <button
            type="button"
            {{on "click" (fn this.favourite post)}}
          >+</button>
        {{/if}}
      </li>
    {{/each}}
  </ul>

  <form {{on "submit" (fn this.addPost this.postTitle)}} novalidate>
    <Input @value={{this.postTitle}} placeholder="Post Title" />
    <button type="submit">Add Post</button>
  </form>

  <h2>Pages {{this.model.pages.length}}</h2>

  <p>Querying pages and returning associated tags</p>

  <ul>
    {{#each this.model.pages as |page|}}
      <li>
        {{page.title}}:
        {{#each page.tags as |tag|}}
          [{{tag.name}}]
        {{/each}}
        {{#if page.favourites.length}}
          <button
            type="button"
            {{on "click" (fn this.unfavourite page.favourites.firstObject)}}
          >-</button>
        {{else}}
          <button
            type="button"
            {{on "click" (fn this.favourite page)}}
          >+</button>
        {{/if}}
      </li>
    {{/each}}
  </ul>

  <form {{on "submit" (fn this.addPage this.pageTitle)}} novalidate>
    <Input @value={{this.pageTitle}} placeholder="Page Title" />
    <button type="submit">Add Page</button>
  </form>

  <h2>Favourites {{this.model.favourites.length}}</h2>

  <p>Querying favourites and returning associated pages and tags</p>

  <ul>
    {{#each this.model.favourites as |favourite|}}
      <li>
        {{#if favourite.pages.length}}
          {{favourite.pages.firstObject.title}}:
          {{#each favourite.pages.firstObject.tags as |tag|}}
            [{{tag.name}}]
          {{/each}}
        {{else}}
          {{favourite.posts.firstObject.title}}:
          {{#each favourite.posts.firstObject.tags as |tag|}}
            [{{tag.name}}]
          {{/each}}
        {{/if}}
      </li>
    {{/each}}
  </ul>
</main>